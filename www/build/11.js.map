{"version":3,"sources":["../../src/pages/item-create/item-create.module.ts","../../src/pages/item-create/item-create.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ItemCreatePage } from './item-create';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ItemCreatePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ItemCreatePage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    ItemCreatePage\r\n  ]\r\n})\r\nexport class ItemCreatePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-create/item-create.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, ViewController, AlertController, NavParams, App } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Disciplina } from '../../models/disciplina';\r\nimport { Turma } from '../../models/turma';\r\nimport { MatriculaAluno } from '../../models/matriculaAluno';\r\n\r\nimport { TurmaProvider } from '../../providers';\r\nimport { MatriculaProvider } from '../../providers';\r\n\r\nexport interface AlertMetadata {\r\n  title: string;\r\n  description: string;\r\n  descriptionDetail: string;\r\n  inputName: string;\r\n  okButton: string;\r\n  cancelButton: string;\r\n}\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-item-create',\r\n  templateUrl: 'item-create.html'\r\n})\r\n\r\nexport class ItemCreatePage {\r\n  disciplina: Disciplina;\r\n  turma: Turma;\r\n  currentTurmas: any = [];\r\n\r\n  alertaConfirmarTurma: AlertMetadata;\r\n  alertaTurmaJaEstaNaMatricula: AlertMetadata;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public viewCtrl: ViewController,\r\n    public turmaProvider: TurmaProvider,\r\n    public matriculaProvider: MatriculaProvider,\r\n    translate: TranslateService,\r\n    private alertCtrl: AlertController,\r\n    navParams: NavParams) {\r\n      this.disciplina = navParams.get('disciplina');\r\n      this.currentTurmas = this.turmaProvider.search({disciplina:this.disciplina.codigo});\r\n\r\n      translate.get([\r\n        \"ADICIONAR_TURMA_TITLE\",\r\n        \"ADICIONAR_TURMA_DESCRIPTION\",\r\n        \"ADICIONAR_TURMA_INPUTNAME\",\r\n        \"AJUSTAR_TURMA_TITLE\",\r\n        \"AJUSTAR_TURMA_DESCRIPTION\",\r\n        \"AJUSTAR_TURMA_DESCRIPTION_DETAIL\",\r\n        \"TURMA_REPETIDA_TITLE\",\r\n        \"TURMA_REPETIDA_DESCRIPTION\",\r\n        \"CANCEL_BUTTON\",\r\n        \"CONFIRM_BUTTON\"\r\n      ]).subscribe(\r\n        (values) => {\r\n          this.alertaConfirmarTurma = {\r\n            title: values.ADICIONAR_TURMA_TITLE,\r\n            description: values.ADICIONAR_TURMA_DESCRIPTION,\r\n            descriptionDetail: '',\r\n            inputName: values.ADICIONAR_TURMA_INPUTNAME,\r\n            okButton: values.CONFIRM_BUTTON,\r\n            cancelButton: values.CANCEL_BUTTON\r\n          };\r\n          this.alertaTurmaJaEstaNaMatricula = {\r\n            title: values.TURMA_REPETIDA_TITLE,\r\n            description: values.TURMA_REPETIDA_DESCRIPTION,\r\n            descriptionDetail: '',\r\n            inputName: '',\r\n            okButton: values.CONFIRM_BUTTON,\r\n            cancelButton: values.CANCEL_BUTTON\r\n          };\r\n        });\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n\r\n  }\r\n\r\n  \r\n  /**\r\n   * The user cancelled, so we dismiss without sending data back.\r\n   */\r\n  cancel() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  processarPedidoMatricula(turma: Turma) {\r\n      this.confirmarPedidoMatricula(turma);\r\n  }\r\n\r\n  /**\r\n   * Inserir Matricula\r\n   */\r\n  inserirMatricula(turma: Turma, status: string, prioridade?: number) {\r\n    var matriculaAluno: MatriculaAluno = {\r\n      turma : turma,\r\n      status,\r\n      prioridade,\r\n    };\r\n\r\n    if(status === 'Matriculado') {\r\n      matriculaAluno.status = status;\r\n    }\r\n    if(typeof prioridade !== 'undefined') {\r\n      matriculaAluno.prioridade = prioridade;\r\n    }\r\n    this.matriculaProvider.add(matriculaAluno);\r\n  }\r\n\r\n  /**\r\n   * Confirmar pedido de matrícula em turma.\r\n   */\r\n  confirmarPedidoMatricula(turma: Turma) {\r\n    // verifica se a turma já está na lista de matricula\r\n    for(let matriculaAluno of this.matriculaProvider.search()) {\r\n      if((matriculaAluno.turma.codigo === turma.codigo) &&\r\n         (matriculaAluno.turma.disciplina.codigo === turma.disciplina.codigo) &&\r\n         ((!matriculaAluno.status)||(matriculaAluno.status === \"Pedido\")||(matriculaAluno.status === \"PreMatricula\")||(matriculaAluno.status === \"Confirmado\")||(matriculaAluno.status === \"Matriculado\"))) {\r\n           let prompt = this.alertCtrl.create({\r\n             title: this.alertaTurmaJaEstaNaMatricula.title,\r\n             message: this.alertaTurmaJaEstaNaMatricula.description,\r\n             buttons: [\r\n               {\r\n                 text: this.alertaTurmaJaEstaNaMatricula.cancelButton,\r\n               },\r\n             ]\r\n           });\r\n           prompt.present();\r\n           return;\r\n         }\r\n    }\r\n\r\n    let prompt = this.alertCtrl.create({\r\n      title: this.alertaConfirmarTurma.title,\r\n      message: this.alertaConfirmarTurma.description,\r\n      inputs: [\r\n        {\r\n          name: 'prioridade',\r\n          placeholder: this.alertaConfirmarTurma.inputName\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: this.alertaConfirmarTurma.cancelButton,\r\n//            handler: data => {\r\n//              alert('Cancelado');\r\n//            }\r\n        },\r\n        {\r\n          text: this.alertaConfirmarTurma.okButton,\r\n          handler: data => {\r\n            var prioridade = parseInt(data.prioridade);\r\n            if(prioridade)\r\n              this.inserirMatricula(turma,'Pedido',prioridade);\r\n            else  \r\n              this.inserirMatricula(turma,'Pedido',10);\r\n              this.navCtrl.pop();\r\n              this.navCtrl.parent.select(0);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n\r\n\r\n  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-create/item-create.ts"],"sourceRoot":""}